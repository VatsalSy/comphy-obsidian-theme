/* Components: reusable UI elements and interaction states. */

a,
.cm-link,
.cm-url,
.cm-hmd-internal-link {
  color: var(--link-color);
  text-decoration: none;
  text-underline-offset: 0.18em;
  transition: color var(--motion-fast) var(--easing-standard), text-decoration-color var(--motion-fast) var(--easing-standard);
}

a:hover,
.cm-link:hover,
.cm-url:hover,
.cm-hmd-internal-link:hover {
  color: var(--link-hover);
  text-decoration: underline;
  text-decoration-color: color-mix(in srgb, var(--link-hover) 72%, transparent);
}

a.external-link {
  color: var(--link-external);
  background-image: none;
  padding-right: 0;
}

a.external-link:hover {
  color: color-mix(in srgb, var(--link-external) 70%, var(--text-primary) 30%);
  text-decoration: underline;
  text-decoration-color: color-mix(in srgb, var(--link-external) 72%, transparent);
}

.theme-dark mark,
.theme-dark .cm-highlight {
  background: rgba(250, 189, 47, 0.38);
  background: color-mix(in srgb, var(--support-yellow-500) 55%, transparent);
  color: var(--text-primary);
  color: color-mix(in srgb, var(--text-primary) 90%, #000 10%);
  border-radius: var(--radius-xs);
  padding: 0 0.2em;
}

.theme-light mark,
.theme-light .cm-highlight {
  background: rgba(250, 189, 47, 0.38);
  background: color-mix(in srgb, var(--support-yellow-500) 42%, transparent);
  color: var(--text-primary);
  color: color-mix(in srgb, var(--text-primary) 90%, #000 10%);
  border-radius: var(--radius-xs);
  padding: 0 0.2em;
}

.markdown-rendered code,
.cm-inline-code {
  font-family: var(--font-mono) !important;
  font-size: var(--font-size-code);
  color: var(--code-normal);
  background: var(--pre-code);
  background: color-mix(in srgb, var(--pre-code) 78%, var(--accent-650) 22%);
  border: 1px solid var(--background-modifier-border);
  border: 1px solid color-mix(in srgb, var(--accent-500) 36%, var(--background-modifier-border) 64%);
  border-radius: var(--radius-xs);
  padding: 0.08em 0.38em;
}

.markdown-rendered pre {
  background: linear-gradient(170deg, color-mix(in srgb, var(--pre-code) 82%, var(--accent-650) 18%), var(--pre-code));
  color: var(--code-normal);
  border: 1px solid color-mix(in srgb, var(--accent-500) 30%, var(--background-modifier-border) 70%);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-soft);
  padding: var(--space-4);
  overflow-x: auto;
}

/* Keep code fences in edit/source mode as one coherent container, not per-line pills. */
.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock,
.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock-bg {
  background: linear-gradient(170deg, color-mix(in srgb, var(--pre-code) 82%, var(--accent-650) 18%), var(--pre-code));
  color: var(--code-normal);
  border-left: 1px solid color-mix(in srgb, var(--accent-500) 30%, var(--background-modifier-border) 70%);
  border-right: 1px solid color-mix(in srgb, var(--accent-500) 30%, var(--background-modifier-border) 70%);
  border-radius: 0;
  box-shadow: none;
}

.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock.HyperMD-codeblock-begin,
.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock-bg.HyperMD-codeblock-begin {
  border-top: 1px solid color-mix(in srgb, var(--accent-500) 30%, var(--background-modifier-border) 70%);
  border-top-left-radius: var(--radius-md);
  border-top-right-radius: var(--radius-md);
  margin-top: var(--space-2);
  padding-top: calc(var(--space-1) + 1px);
}

.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock.HyperMD-codeblock-end,
.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock-bg.HyperMD-codeblock-end {
  border-bottom: 1px solid color-mix(in srgb, var(--accent-500) 30%, var(--background-modifier-border) 70%);
  border-bottom-left-radius: var(--radius-md);
  border-bottom-right-radius: var(--radius-md);
  margin-bottom: var(--space-2);
  padding-bottom: calc(var(--space-1) + 1px);
}

.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock:not(.HyperMD-codeblock-begin, .HyperMD-codeblock-end),
.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock-bg:not(.HyperMD-codeblock-begin, .HyperMD-codeblock-end) {
  padding-inline: var(--space-4);
}

.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock-begin .cm-formatting-code-block,
.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock-end .cm-formatting-code-block {
  color: var(--text-muted);
}

.markdown-source-view.mod-cm6 .cm-line.HyperMD-codeblock-begin .cm-hmd-codeblock {
  color: color-mix(in srgb, var(--accent-200) 72%, var(--text-primary) 28%);
}

/* Scale rendered LaTeX math in reading and live preview views. */
.markdown-rendered mjx-container,
.markdown-rendered .math,
.markdown-source-view.mod-cm6 mjx-container,
.markdown-source-view.mod-cm6 .cm-embed-math mjx-container {
  font-size: calc(1em * var(--math-render-scale));
}

.cm-s-obsidian span.cm-keyword,
.markdown-rendered .token.keyword {
  color: var(--code-keyword);
}

.cm-s-obsidian span.cm-def,
.cm-s-obsidian span.cm-variable,
.markdown-rendered .token.function {
  color: var(--code-function);
}

.cm-s-obsidian span.cm-comment,
.markdown-rendered .token.comment {
  color: var(--code-comment);
}

.cm-s-obsidian span.cm-string,
.cm-s-obsidian span.cm-string-2,
.markdown-rendered .token.string {
  color: var(--code-string);
}

.cm-s-obsidian span.cm-number,
.markdown-rendered .token.number,
.markdown-rendered .token.boolean {
  color: var(--code-number);
}

.cm-s-obsidian span.cm-operator,
.markdown-rendered .token.operator,
.markdown-rendered .token.punctuation {
  color: var(--code-operator);
}

.cm-s-obsidian span.cm-type,
.cm-s-obsidian span.cm-builtin,
.markdown-rendered .token.class-name,
.markdown-rendered .token.builtin {
  color: var(--code-type);
}

.cm-s-obsidian span.cm-property,
.cm-s-obsidian span.cm-attribute,
.markdown-rendered .token.property,
.markdown-rendered .token.attr-name {
  color: var(--code-property);
}

blockquote,
.markdown-rendered blockquote {
  border-left: 4px solid var(--blockquote-border-color);
  background: linear-gradient(95deg, var(--blockquote-background-color), transparent 70%);
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  padding: var(--space-2) var(--space-4);
  margin-inline: 0;
}

.callout {
  border-radius: var(--radius-md);
  border: 1px solid color-mix(in srgb, var(--accent-400) 52%, var(--background-modifier-border) 48%);
  background: linear-gradient(160deg, color-mix(in srgb, var(--accent-250) 12%, transparent), transparent 60%);
}

.callout .callout-title {
  color: color-mix(in srgb, var(--accent-300) 70%, var(--text-primary) 30%);
  font-weight: var(--weight-semibold);
}

a.tag,
.cm-hashtag {
  background: linear-gradient(120deg, var(--accent-400), var(--accent-500));
  color: var(--tag-text) !important;
  border-radius: var(--radius-pill);
  padding: 0.13em 0.6em;
  border: 1px solid color-mix(in srgb, var(--accent-250) 30%, transparent);
  font-size: 0.85em;
  font-weight: var(--weight-medium);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);
}

a.tag:hover,
.cm-hashtag:hover {
  filter: brightness(1.06) saturate(1.02);
}

button,
.clickable-icon,
.nav-action-button,
.mod-cta {
  border-radius: var(--radius-sm);
  border: 1px solid var(--background-modifier-border);
  background: color-mix(in srgb, var(--background-secondary-alt) 78%, transparent);
  color: var(--text-secondary);
  transition: background var(--motion-fast) var(--easing-standard), border-color var(--motion-fast) var(--easing-standard), color var(--motion-fast) var(--easing-standard), transform var(--motion-fast) var(--easing-standard);
}

button:hover,
.clickable-icon:hover,
.nav-action-button:hover {
  border-color: color-mix(in srgb, var(--accent-300) 45%, var(--background-modifier-border) 55%);
  background: color-mix(in srgb, var(--accent-550) 18%, var(--background-secondary-alt) 82%);
  color: var(--text-primary);
}

button:active,
.clickable-icon:active,
.nav-action-button:active {
  transform: translateY(1px);
}

button.mod-cta,
.mod-cta {
  border-color: color-mix(in srgb, var(--accent-350) 58%, transparent);
  background: linear-gradient(145deg, var(--accent-400), var(--accent-500));
  color: var(--tag-text) !important;
  box-shadow: 0 4px 12px rgba(var(--accent-rgb), 0.28);
}

button.mod-cta:hover,
.mod-cta:hover {
  background: linear-gradient(145deg, var(--accent-350), var(--accent-450));
  border-color: color-mix(in srgb, var(--accent-250) 58%, transparent);
}

input.task-list-item-checkbox {
  border: 1px solid color-mix(in srgb, var(--accent-300) 36%, var(--background-modifier-border) 64%);
  border-radius: var(--radius-xs);
  background: var(--background-secondary);
}

input.task-list-item-checkbox:checked {
  background: linear-gradient(145deg, var(--accent-400), var(--accent-500));
  border-color: var(--accent-350);
}

.suggestion-item,
.menu,
.dropdown,
select,
.modal,
.prompt-results {
  background: color-mix(in srgb, var(--background-secondary) 88%, var(--accent-650) 12%);
  border-color: var(--background-modifier-border);
}

.dropdown,
select,
.setting-item-control .dropdown,
.setting-item-control select {
  background-image: none !important;
  background-repeat: no-repeat !important;
  font-family: var(--font-display), sans-serif;
  font-variant-ligatures: none;
}

/* Keep native dropdown rendering to avoid cross-platform custom select artifacts. */
select {
  -webkit-appearance: menulist;
  appearance: auto;
  color: var(--text-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-sm);
  padding: 0.3em 0.6em;
}

.menu-item,
.dropdown-option,
.suggestion-item {
  background-image: none !important;
}

.suggestion-item.is-selected,
.is-selected .suggestion-content,
.nav-file-title.is-active {
  background: linear-gradient(120deg, color-mix(in srgb, var(--accent-550) 75%, transparent), color-mix(in srgb, var(--accent-500) 65%, transparent));
  color: var(--tag-text);
}

.nav-file-title,
.nav-folder-title,
.outline .tree-item-self {
  border-radius: var(--radius-sm);
  transition: background var(--motion-fast) var(--easing-standard), filter var(--motion-fast) var(--easing-standard), transform var(--motion-fast) var(--easing-standard);
}

.nav-file-title:hover,
.outline .tree-item-self:hover {
  background: color-mix(in srgb, var(--accent-550) 18%, var(--background-secondary-alt) 82%);
}

.outline .tree-item-children,
.nav-folder-children .nav-folder-children {
  border-left: 1px solid color-mix(in srgb, var(--accent-300) 40%, var(--background-modifier-border) 60%);
  border-radius: var(--radius-xs);
}

table {
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

table :is(th, td) {
  border: 1px solid var(--background-modifier-border);
  padding: 0.5rem 0.8rem;
}

table th {
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  background: color-mix(in srgb, var(--accent-550) 16%, var(--background-secondary) 84%);
}

.theme-dark table tr:nth-child(odd) td {
  background: color-mix(in srgb, var(--background-secondary) 92%, #fff 8%);
}

.theme-dark table tr:nth-child(even) td {
  background: color-mix(in srgb, var(--background-secondary-alt) 90%, #000 10%);
}

.theme-light table tr:nth-child(odd) td {
  background: color-mix(in srgb, var(--background-primary) 96%, var(--accent-150) 4%);
}

.theme-light table tr:nth-child(even) td {
  background: color-mix(in srgb, var(--background-secondary) 95%, var(--accent-150) 5%);
}

.workspace-ribbon .clickable-icon,
.view-actions .clickable-icon,
.sidebar-toggle-button {
  color: var(--text-muted);
}

.workspace-ribbon .clickable-icon:hover,
.view-actions .clickable-icon:hover,
.sidebar-toggle-button:hover,
.clickable-icon.is-active {
  color: var(--accent-300);
}
